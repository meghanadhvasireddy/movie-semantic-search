{"openapi":"3.1.0","info":{"title":"Semantic Search API","version":"0.1.0"},"paths":{"/metrics":{"get":{"summary":"Metrics","description":"Endpoint that serves Prometheus metrics.","operationId":"metrics_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/healthz":{"get":{"summary":"Healthz","operationId":"healthz_healthz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/index/stats":{"get":{"summary":"Index Stats","operationId":"index_stats_index_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IndexStats"}}}}}}},"/search":{"post":{"summary":"Search","operationId":"search_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"IndexStats":{"properties":{"model":{"type":"string","title":"Model"},"dim":{"type":"integer","title":"Dim"},"doc_count":{"type":"integer","title":"Doc Count"},"cache_hit_rate":{"type":"number","title":"Cache Hit Rate","default":0.0}},"type":"object","required":["model","dim","doc_count"],"title":"IndexStats"},"SearchRequest":{"properties":{"query":{"type":"string","title":"Query"},"k":{"type":"integer","title":"K","default":5},"page":{"type":"integer","title":"Page","default":1},"per_page":{"type":"integer","title":"Per Page","default":5},"use_synonyms":{"type":"boolean","title":"Use Synonyms","default":true},"highlight":{"type":"boolean","title":"Highlight","default":true},"year_min":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year Min"},"year_max":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year Max"},"genres":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Genres","description":"e.g., ['Drama','Sci-Fi']"}},"type":"object","required":["query"],"title":"SearchRequest"},"SearchResponse":{"properties":{"query":{"type":"string","title":"Query"},"took_ms":{"type":"integer","title":"Took Ms"},"cached":{"type":"boolean","title":"Cached"},"results":{"items":{"$ref":"#/components/schemas/SearchResult"},"type":"array","title":"Results"}},"type":"object","required":["query","took_ms","cached","results"],"title":"SearchResponse"},"SearchResult":{"properties":{"id":{"type":"integer","title":"Id"},"title":{"type":"string","title":"Title"},"snippet":{"type":"string","title":"Snippet"},"score":{"type":"number","title":"Score"},"year":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year"},"genres":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Genres"}},"type":"object","required":["id","title","snippet","score"],"title":"SearchResult"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}